<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Winshuttle - Edit Configuration</title>
        <link href="assets/css/kendo.common.min.css" rel="stylesheet">
        <link href="assets/css/kendo.default.min.css" rel="stylesheet">
        <link href="assets/css/kendo.dataviz.min.css" rel="stylesheet">
        <link href="assets/css/kendo.dataviz.default.min.css" rel="stylesheet">
        <link href="assets/css/chosen.css" rel="stylesheet">
        <link href="assets/css/winshuttle.css" rel="stylesheet">
        <link href="assets/css/ws-formitems.css" rel="stylesheet">
    </head>
    <body>
        <div id="workflow-header">
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span6">
                        <div class="workflow-brand">
                            <img src="assets/img/ws-logo-workflow.png" alt="Winshuttle">
                            <div class="home-dropdown">
                                <div class="btn-group">
                                    <a class="btn btn-action dropdown-toggle" data-toggle="dropdown" href="#"></a>
                                    <ul class="dropdown-menu">
                                        <div>
                                            <li class="dropdown-title">Logs &amp; Reporting</li>
                                            <li><a href="#">Charts</a></li>
                                            <li><a href="#">Excel Data Dump</a></li>
                                            <li><a href="#">Logging</a></li>
                                            <li><a href="#">Log File Viewer</a></li>
                                            <li class="dropdown-title">Processes</li>
                                            <li><a href="#">Process Control</a></li>
                                            <li><a href="#">Manage Background Jobs</a></li>
                                        </div>
                                        <div>
                                            <li class="dropdown-title">Server Administration</li>
                                            <li><a href="#">Admin Commands</a></li>
                                            <li><a href="#">Configure Options</a></li>
                                            <li><a href="#">Scheduler</a></li>
                                            <li><a href="#">Workflow Extensions</a></li>
                                            <li><a href="#">Database Status</a></li>
                                            <li><a href="#">Licenses</a></li>
                                        </div>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="span6">
                        <ul class="inline-list pull-right">
                            <!--<li>
                                <a class="font-white" href="javascript:;">&#9664; Winshuttle Central</a>
                                </li>-->
                            <li>
                                <select class="input-medium">
                                    <option>Sharepoint - 80</option>
                                </select>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div id="mainsi">
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span12">
                        <ul id="breadcrumbs">
                            <li><a href="#">Administration</a> &rsaquo;</li>
                            <li><a href="#">Configuration Options</a> &rsaquo;</li>
                            <li class="related-links">
                                <ul>
                                    <li class="related-label">Related:</li>
                                    <li class="link"><a href="#">Configuration Options</a></li>
                                    <li class="link"><a href="#">Configuration Documentation</a></li>
                                </ul>
                            </li>
                        </ul>
                        <ul id="secnav">
                            <li class="active">
                                <h1>Edit Configuration</h1>
                                <div class="row-fluid">
                                    <div class="span8 page-description">Page description goes here.  If no page description exists, delete this paragraph.  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span8">
                        <div class="settings-info">
                            <p class="clearfix">
                                <span class="label">Key Name</span>
                                <label id="keyname">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</label>
                            </p>
                            <p class="clearfix">
                                <span class="label">Description</span>
                                <label id="keydescription">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</label>
                            </p>
                            <p class="clearfix">
                                <span class="label">Key Type</span>
                                <label id="keytype">afdsfdasfdsaf saf safad</label>
                            </p>
                            <p class="clearfix">
                                <span class="label">Scope</span>
                                <label id="keyscope">fdsfasfasfdfsd</label>
                            </p>
                        </div>
                    </div>
                    <!-- /div .span8 -->
                </div>
                <div class="row-fluid">
                    <div class="span8">
                        <h2>Value</h2>
                        <table id="table-key" class="table table-striped table-bordered table-addedit-form">
                            <thead>
                                <tr>
                                    <th width="33.3333333333%"><a href="#">Scope</a></th>
                                    <th width="66.6666666667%"><a href="#">Value</a></th>
                                </tr>
                            </thead>
                            <tbody id="js-administration-editconfiguration-value">
                                <tr class="js-administration-editconfiguration-value-item">
                                    <td>
                                        <div class="js-administration-editconfiguration-value-display contain-long-word">Global</div>
                                        <div class="js-administration-editconfiguration-value-form contain-long-word js-initial-hide" style="display: none;">Global</div>
                                    </td>
                                    <td>
                                        <div class="pull-right">
                                            <div><a class="js-administration-editconfiguration-value-edittoggle" href="#"><i class="icon-edit">&nbsp;&nbsp;</i></a><a class="js-administration-editconfiguration-value-deleterow" href="#"><i class="icon-trash">&nbsp;&nbsp;</i></a></div>
                                            <div class="update-actions js-initial-hide" style="display: none;"><button class="js-administration-editconfiguration-value-editsave js-administration-editconfiguration-value-edittoggle btn btn-primary"><span>Save</span></button><button class="js-administration-editconfiguration-value-edittoggle btn"><span>Cancel</span></button></div>
                                        </div>
                                        <div class="js-administration-editconfiguration-value-display">True</div>
                                        <div class="js-administration-editconfiguration-value-form js-initial-hide" style="display: none;">
                                            <ul class="checkbox-group inline-list">
                                                <li><label><input type="radio" name="boolean_item_TEST" checked="checked"><span>True</span></label></li>
                                                <li><label><input type="radio" name="boolean_item_TEST"><span>False</span></label></li>
                                            </ul>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="js-administration-editconfiguration-value-item">
                                    <td>
                                        <div class="js-administration-editconfiguration-value-display contain-long-word">formex/</div>
                                        <div class="js-administration-editconfiguration-value-form contain-long-word js-initial-hide" style="display: none;">formex/</div>
                                    </td>
                                    <td>
                                        <div class="pull-right">
                                            <div><a class="js-administration-editconfiguration-value-edittoggle" href="#"><i class="icon-edit">&nbsp;&nbsp;</i></a><a class="js-administration-editconfiguration-value-deleterow" href="#"><i class="icon-trash">&nbsp;&nbsp;</i></a></div>
                                            <div class="update-actions js-initial-hide" style="display: none;"><button class="js-administration-editconfiguration-value-editsave js-administration-editconfiguration-value-edittoggle btn btn-primary"><span>Save</span></button><button class="js-administration-editconfiguration-value-edittoggle btn"><span>Cancel</span></button></div>
                                        </div>
                                        <div class="js-administration-editconfiguration-value-display">user3@winshuttle.com</div>
                                        <div class="js-administration-editconfiguration-value-form js-initial-hide" style="display: none;"><input type="text" class="input-mid" value="user3@winshuttle.com"></div>
                                    </td>
                                </tr>
                                <tr class="js-administration-editconfiguration-value-item">
                                    <td>
                                        <div class="js-administration-editconfiguration-value-display contain-long-word">formex/Announcements</div>
                                        <div class="js-administration-editconfiguration-value-form contain-long-word js-initial-hide" style="display: none;">formex/Announcements</div>
                                    </td>
                                    <td>
                                        <div class="pull-right">
                                            <div><a class="js-administration-editconfiguration-value-edittoggle" href="#"><i class="icon-edit">&nbsp;&nbsp;</i></a><a class="js-administration-editconfiguration-value-deleterow" href="#"><i class="icon-trash">&nbsp;&nbsp;</i></a></div>
                                            <div class="update-actions js-initial-hide" style="display: none;"><button class="js-administration-editconfiguration-value-editsave js-administration-editconfiguration-value-edittoggle btn btn-primary"><span>Save</span></button><button class="js-administration-editconfiguration-value-edittoggle btn"><span>Cancel</span></button></div>
                                        </div>
                                        <div class="js-administration-editconfiguration-value-display">Bananas</div>
                                        <div class="js-administration-editconfiguration-value-form js-initial-hide" style="display: none;">
                                            <select class="input-mid">
                                                <option>Select</option>
                                                <option>Apples</option>
                                                <option selected="selected">Bananas</option>
                                                <option>Cherries</option>
                                            </select>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="js-administration-editconfiguration-value-item">
                                    <td>
                                        <div class="js-administration-editconfiguration-value-display contain-long-word">formex/Calendar</div>
                                        <div class="js-administration-editconfiguration-value-form contain-long-word js-initial-hide" style="display: none;">formex/Calendar</div>
                                    </td>
                                    <td>
                                        <div class="pull-right">
                                            <div><a class="js-administration-editconfiguration-value-edittoggle" href="#"><i class="icon-edit">&nbsp;&nbsp;</i></a><a class="js-administration-editconfiguration-value-deleterow" href="#"><i class="icon-trash">&nbsp;&nbsp;</i></a></div>
                                            <div class="update-actions js-initial-hide" style="display: none;"><button class="js-administration-editconfiguration-value-editsave js-administration-editconfiguration-value-edittoggle btn btn-primary"><span>Save</span></button><button class="js-administration-editconfiguration-value-edittoggle btn"><span>Cancel</span></button></div>
                                        </div>
                                        <div class="js-administration-editconfiguration-value-display">08/15/14</div>
                                        <div class="js-administration-editconfiguration-value-form js-initial-hide" style="display: none;"><input type="text" class="input-mid" value="08/15/14"></div>
                                    </td>
                                </tr>
                                <!-- add new value -->
                                <tr class="js-rowadd-toggle-view-slave-1 row-add">
                                    <td colspan="2"><a class="js-rowadd-toggle-view-master-0" href="#">Add New Value</a></td>
                                </tr>
                                <tr class="js-rowadd-toggle-view-slave-0 row-add js-initial-hide">
                                    <td>
                                        <div id="js-administration-editconfiguration-addnewvalue-select" class="js-dropdowntree-target dropdown-tree-menu dropdown-tree-removewidthlimits input-large">
                                            <div class="dropdown">
                                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                                    <span class="dropdown-toggle-symbol"></span>
                                                    <span class="js-administration-dropdowntree-select-display">All Sites & Lists</span>
                                                </a>
                                                <ul class="dropdown-menu">
                                                    <li class="js-administration-dropdowntree-group">
                                                        <a class="js-addnewvalue-toggle-view-master-0" data-corresponding-value-type="-1" href="#"><span>All Sites & Lists</span></a>
                                                    </li>
                                                    <li class="js-administration-dropdowntree-group">
                                                        <a class="js-addnewvalue-toggle-view-master-2" data-corresponding-value-type="10002" href="#"><span>Global</span></a>
                                                    </li>
                                                    <li class="js-administration-dropdowntree-group">
                                                        <a class="js-addnewvalue-toggle-view-master-1" data-corresponding-value-type="10001" href="#"><span>formex/</span></a>
                                                        <ul>
                                                            <li><a class="js-addnewvalue-toggle-view-master-3" data-corresponding-value-type="10003" href="#"><span>Announcements</span></a></li>
                                                            <li><a class="js-addnewvalue-toggle-view-master-4 js-menu-inactive" data-corresponding-value-type="10004" href="#"><span>Calendar</span></a></li>
                                                            <li><a class="js-addnewvalue-toggle-view-master-5" data-corresponding-value-type="10005" href="#"><span>Tasks</span></a></li>
                                                        </ul>
                                                    </li>
                                                    <li class="js-administration-dropdowntree-group">
                                                        <a class="js-addnewvalue-toggle-view-master-6 js-menu-inactive" data-corresponding-value-type="10006" href="#"><span>Site B/</span></a>
                                                    </li>
                                                    <li class="js-administration-dropdowntree-group">
                                                        <a class="js-addnewvalue-toggle-view-master-7" data-corresponding-value-type="10007" href="#"><span>Site C/</span></a>
                                                        <ul>
                                                            <li><a class="js-addnewvalue-toggle-view-master-8 js-menu-inactive" data-corresponding-value-type="10008" href="#"><span>List 12</span></a></li>
                                                        </ul>
                                                    </li>
                                                    
                                                    <li class="js-administration-dropdowntree-group">
                                                        <a data-corresponding-value-type="11007" href="#"><span>DeepTest/</span></a>
                                                        <ul>
                                                            <li>
                                                                <a data-corresponding-value-type="12007" href="#"><span>L1/</span></a>
                                                                <ul>
                                                                    <li><a data-corresponding-value-type="12008" href="#"><span>L2.1 Lorem Ipsum</span></a></li>
                                                                    <li>
                                                                        <a data-corresponding-value-type="13007" href="#"><span>L2.2P/</span></a>
                                                                        <ul>
                                                                            <li><a data-corresponding-value-type="13008" href="#"><span>L3 Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></a></li>
                                                                        </ul>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    
                                                </ul>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="add-actions">
                                            <button class="js-administration-editconfiguration-value-addrow js-rowadd-toggle-view-master-1
                                                    js-addnewvalue-toggle-view-slave-1
                                                    js-addnewvalue-toggle-view-slave-2
                                                    js-addnewvalue-toggle-view-slave-3
                                                    js-addnewvalue-toggle-view-slave-4
                                                    js-addnewvalue-toggle-view-slave-5
                                                    js-addnewvalue-toggle-view-slave-6
                                                    js-addnewvalue-toggle-view-slave-7
                                                    js-addnewvalue-toggle-view-slave-8
                                                    btn btn-primary js-initial-hide">
                                                <span>Add</span>
                                            </button>
                                            <button class="js-rowadd-toggle-view-master-1 btn"><span>Cancel</span></button>
                                        </div>
                                        
                                        <div class="js-addnewvalue-toggle-view-slave-1 js-initial-hide" data-corresponding-value-type="10001">
                                            <input type="text" class="form-control input-mid" placeholder="String">
                                        </div>
                                        
                                        <div class="js-addnewvalue-toggle-view-slave-2 js-initial-hide" data-corresponding-value-type="10002">
                                            <ul class="checkbox-group inline-list">
                                                <li>
                                                    <label>
                                                    <input type="radio" name="TEMP_boolean_datatype" checked="checked">
                                                    <span>True</span>
                                                    </label>
                                                </li>
                                                <li>
                                                    <label>
                                                    <input type="radio" name="TEMP_boolean_datatype">
                                                    <span>False</span>
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <div class="js-addnewvalue-toggle-view-slave-3 js-initial-hide" data-corresponding-value-type="10003">
                                            <select class="input-mid">
                                                <option>Select</option>
                                                <option>Apples</option>
                                                <option>Bananas</option>
                                                <option>Cherries</option>
                                            </select>
                                        </div>
                                        
                                        <div class="js-addnewvalue-toggle-view-slave-4 js-initial-hide" data-corresponding-value-type="10004">
                                            <input type="text" class="form-control input-mid" placeholder="String 2">
                                        </div>
                                        
                                        <div class="js-addnewvalue-toggle-view-slave-5 js-initial-hide" data-corresponding-value-type="10005">
                                            <select class="js-chosen-target input-mid" multiple tabindex="3" data-placeholder="Select">
                                                <option>Task 1</option>
                                                <option>Task 2</option>
                                                <option>Task 3</option>
                                                <option>Task 4</option>
                                                <option>Task 5</option>
                                                <option>Task 6</option>
                                                <option>Task 7</option>
                                                <option>Task 8</option>
                                                <option>Task 9</option>
                                            </select>
                                        </div>
                                        
                                        <div class="js-addnewvalue-toggle-view-slave-6 js-initial-hide" data-corresponding-value-type="10006">
                                            <input type="text" class="form-control input-mid" placeholder="String 3">
                                        </div>
                                        
                                        <div class="js-addnewvalue-toggle-view-slave-7 js-initial-hide" data-corresponding-value-type="10007">
                                            <input type="text" class="form-control input-mid" placeholder="String 4">
                                        </div>
                                        
                                        <div class="js-addnewvalue-toggle-view-slave-8 js-initial-hide" data-corresponding-value-type="10008">
                                            <input type="text" class="form-control input-mid" placeholder="String 5">
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span8">
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary"><span>Save</span></button>
                            <button class="btn"><span>Cancel</span></button>
                        </div>
                    </div>
                </div>
                <div class="row-fluid spacer"></div>
            </div>
            <!-- /div .container-fluid -->
        </div>
        <!-- /div #mainsi -->
        
        <div id="footer" class="row-fluid">
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span8">
                        <div id="footer-links">
                            <ul>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">{{Back to Central}}</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="span4">
                        <div class="pull-right">
                            &copy; 2008-2015 Winshuttle, LLC
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script>
            if (!window.jQuery) {
                console.error("jQuery CDN is down.")
                document.write('<script src="assets/js/jquery.min.js"><\/script>');
            }
        </script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <script>
            if (!$.fn.modal) {
                console.error("Bootstrap CDN is down.")
                document.write('<script src="assets/js/bootstrap.min.js"><\/script>');
            }
        </script>
        <script src="assets/js/kendo.all.min.js"></script>
        <script src="assets/js/chosen.jquery.min.js"></script>
        <script src="assets/js/wslib_master.js"></script>
        <script src="assets/js/wsplugin_master.js"></script>
        <script src="assets/js/ws_global_initialization_administration.js"></script>

        <script src="assets/js/ws_common.js" type="text/javascript"></script>

        <script>
            $(document).ready(function () {
                ws_initializeWebApp("/admin/GetAllWebApp", $('#webappsDropdown'), GetKey);
                //var $id = wsPlugin_getURLParameter('id');
                $("#dropdownpagesize").change(function () {
                    GetKey();
                });

                $("#btnSearch").click(function () {
                    GetKey();
                });

                function GetKey() {
                    var server = decodeURI(wsPlugin_getURLParameter('server'));
                    var keyname = decodeURI(wsPlugin_getURLParameter('k'));
                    $("#webappsDropdown option").each(function () {
                        if ($(this).value == server) {
                            $(this).prop('selected', true);
                            //break;
                        }
                    });
                    //                    for (var i = 0; i < $('#webappsDropdown').options.length; i++) {
                    //                        if (elmnt.options[i].value == server)
                    //                            elmnt.selectedIndex = i;
                    //                        break;
                    //                    }

                    ws_ajaxCall('/keyconfiguration/GetKey', { server: $('#webappsDropdown').val(),
                        keyname: keyname
                    }
                    , CallBackSuccess, CallBackFunctionFailure, null);
                }

                function CallBackSuccess(data) {
                    $('#table-key > tbody tr.js-administration-editconfiguration-value-item').remove();
                    //while($('#table-key > tbody tr').length > 1)
                    //$('#table-key > tbody tr:eq(0)').remove();

                    if (data.Key != undefined && data.Key != null) {
                        keys = data.Key;
                        var xmlDocument = loadXMLString(keys);
                        $("#keyname").text(xmlDocument.documentElement.getAttribute("Name"));
                        $("#keydescription").text(xmlDocument.documentElement.getAttribute("Description"));
                        $("#keytype").text(xmlDocument.documentElement.getAttribute("Type"));
                        $("#keyscope").text(xmlDocument.documentElement.getAttribute("Scope"));
                        var keys = xmlDocument.selectNodes("/Key/KeyAssignment");
                        if (keys != undefined && keys != null && keys.length > 0) {
                            $.each(keys, function (k, v) {
                                var row = CreateRow(v);
                                $("#table-key > tbody tr.row-add").first().before(row);
                            });
                        }
                        //var markup = AddNewRow();
                        //$("#table-key > tbody:last").append(markup);
                        //wsLib_toggleViews("rowadd", 2, "default");
                    }
                }

//                function CallBackSuccess(data) {
//                    $('#table-key > tbody tr.js-administration-editconfiguration-value-item').remove();
//                //while($('#table-key > tbody tr').length > 1)
//                    //$('#table-key > tbody tr:eq(0)').remove();

//                    if (data.Key != undefined && data.Key != null) {
//                        keys = data.Key;
//                        var xmlDocument = loadXMLString(keys);
//                        $("#keyname").text(xmlDocument.documentElement.getAttribute("Name"));
//                        $("#keydescription").text(xmlDocument.documentElement.getAttribute("Description"));
//                        $("#keytype").text(xmlDocument.documentElement.getAttribute("Type"));
//                        $("#keyscope").text(xmlDocument.documentElement.getAttribute("Scope"));
//                        var keys = xmlDocument.selectNodes("/Key/KeyAssignment");
//                        if (keys != undefined && keys != null && keys.length > 0) {
//                            $.each(keys, function (k, v) {
//                                var row = CreateRow(v);
//                                $("#table-key > tbody:last").append(row);
//                            });
//                        }
//                        var markup = AddNewRow();
//                        $("#table-key > tbody:last").append(markup);
//                        wsLib_toggleViews("rowadd", 2, "default");
//                    }
//                }

                function AddNewRow() {
                    var markup = '<tr class="js-rowadd-toggle-view-slave-1 row-add">' +
                                 '  <td colspan="2"><a class="js-rowadd-toggle-view-master-0" href="#">Add New Value</a></td>' +
								 '	</tr>' +
                                 '<tr class="js-rowadd-toggle-view-slave-0 row-add js-initial-hide">' +
                                    '<td>' +
                                        '<select id="js-administration-editconfiguration-addnewvalue-select" class="js-addnewvalue-toggle-view-master-0 input-max">' +
                                            '<option selected="selected" data-toggle-view="0">Select</option>' +
                                            '<option value="A" data-toggle-view="1">Sample String Data Type</option>' +
                                            '<option value="B" data-toggle-view="2">Sample Boolean Data Type</option>' +
                                         '   <option value="C" data-toggle-view="3">Sample Menu Data Type</option>' +
                                        '</select>' +
                                    '</td>' +
                                    '<td>' +
                                        '<div class="js-addnewvalue-toggle-view-slave-1 js-initial-hide">' +
                                            '<input type="text" class="form-control input-large" placeholder="String">' +
                                        '</div>' +
                                        '<div class="js-addnewvalue-toggle-view-slave-2 js-initial-hide">' +
                                            '<ul class="checkbox-group inline-list">' +
                                                '<li>' +
                                                    '<label>' +
                                                    '<input type="radio" name="TEMP_boolean_datatype" checked="checked">' +
                                                    '<span>True</span>' +
                                                    '</label>' +
                                                '</li>' +
                                                '<li>' +
                                                    '<label>' +
                                                    '<input type="radio" name="TEMP_boolean_datatype">' +
                                                    '<span>False</span>' +
                                                 '   </label>' +
                                                '</li>' +
                                            '</ul>' +
                                        '</div>' +
                                        '<div class="js-addnewvalue-toggle-view-slave-3 js-initial-hide">' +
                                            '<select class="input-mid">' +
                                                '<option>Select</option>' +
                                                '<option>Apples</option>' +
                                                '<option>Bananas</option>' +
                                                '<option>Cherries</option>' +
                                         '   </select>' +
                                        '</div>' +
                                        '<div class="add-actions">' +
                                            '<button class="js-administration-editconfiguration-value-addrow js-rowadd-toggle-view-master-1 js-addnewvalue-toggle-view-slave-1 js-addnewvalue-toggle-view-slave-2' + 'js-addnewvalue-toggle-view-slave-3 btn btn-primary js-initial-hide"><span>Add</span></button>' +
                                         '   <button class="js-rowadd-toggle-view-master-1 btn"><span>Cancel</span></button>' +
                                        '</div>' +
                                 '   </td>' +
                                '</tr>';

                    return markup;
                }

                function CreateRow(v) {

                    var markup = '<tr class="js-administration-editconfiguration-value-item"> ' +
                             '      <td>' +
                             '          <div class="js-administration-editconfiguration-value-display contain-long-word">' + v.getAttribute("AssignedTo") + '</div>' +
                             '          <div class="js-administration-editconfiguration-value-form contain-long-word js-initial-hide" style="display: none;"> ' + v.getAttribute("AssignedTo") + '</div>' +
                             '      </td>' +
                             '      <td>' +
                             '          <div class="pull-right">' +
                             '              <div><a class="js-administration-editconfiguration-value-edittoggle" href="#"><i class="icon-edit">&nbsp;&nbsp;</i></a><a class="js-administration-editconfiguration-value-deleterow" href="#"><i class="icon-trash">&nbsp;&nbsp;</i></a></div>' +
                             '              <div class="update-actions js-initial-hide" style="display: none;"><button id="btnSave" class="js-administration-editconfiguration-value-editsave js-administration-editconfiguration-value-edittoggle btn btn-primary"><span>Save</span></button><button id="btnCancel" class="js-administration-editconfiguration-value-edittoggle btn"><span>Cancel</span></button></div>' +
                    '          </div>' +
                             '          <div class="js-administration-editconfiguration-value-display">' + wsPlugin_capitaliseFirstLetter(v.getAttribute("Value")) + '</div>' +
                             '          <div class="js-administration-editconfiguration-value-form js-initial-hide" style="display: none;">';
                    var type = v.parentNode.getAttribute("Type");
                    if (type == "radio") {
                        markup += ' <ul class="checkbox-group inline-list">';
                        var possibleValuesNode = v.parentNode.selectNodes("./PossibleValues/radio");
                        if (possibleValuesNode != null && possibleValuesNode != undefined) {
                            //var childNodes = possibleValuesNode.context.childNodes;
                            //if (childNodes != null && childNodes != undefined) {
                            for (var i = 0; i < possibleValuesNode.length; i++) {
                                var attr = possibleValuesNode[i].getAttribute("value");
                                if (attr != null && attr != undefined) {
                                    var checked = '';
                                    if (attr.toLowerCase() == v.getAttribute("Value").toLowerCase()) {
                                        checked = ' checked="checked"';
                                    }

                                    var length = v.getAttribute("Value").length;
                                    markup += '<li><label><input type="radio" name="boolean_item_' + length + '"' + checked + '><span>' + wsPlugin_capitaliseFirstLetter(attr) + '</span></label></li>';
                                }
                                // }wsPlugin_capitaliseFirstLetter(attr)
                            }
                        }

                        markup += '</ul>';
                    }
                    else if (type == "dropdown") {
                        makrup += '<select class="input-mid">';

                        var possibleValuesNode = v.parentNode.selectNodes("./PossibleValues/radio");
                        if (possibleValuesNode != null && possibleValuesNode != undefined) {
                            //var childNodes = possibleValuesNode.context.childNodes;
                            //if (childNodes != null && childNodes != undefined) {
                            for (var i = 0; i < possibleValuesNode.length; i++) {
                                var attr = possibleValuesNode[i].getAttribute("value");
                                if (attr != null && attr != undefined) {
                                    var selected = '';
                                    if (attr.toLowerCase() == v.getAttribute("Value").toLowerCase()) {
                                        selected = ' selected="selected"';
                                    }

                                    markup += '<option' + selected + '>' + attr + '</option>';
                                }
                            }
                            //}
                        }

                        markup += '</select>';
                    }
                    else {
                        markup += '<input type="text" class="input-mid" value="' + v.getAttribute("Value") + '" />';
                    }

                    markup += '</div></td></tr>';

                    return markup;
                }


                function CallBackFunctionFailure(xhr, status, error, callbackdata) {
                    if (xhr.responseText != null && xhr.responseText != undefined) {
                        alert("Status: " + xhr.Status + ", Error: " + xhr.responseText);
                    }
                }
            });
        </script>

        <script>
            // Hoa's code
            (function() {
                $('.js-chosen-target').toggleClass('js-chosen-target js-chosen-target-active')
                                      .chosen({
                    width: "50%"
                });
                
                var numberOfValueTypes = 8; // ### ATTENTION - This number should be the amount of types of Values that exist in this form.
                
                
                
                var $editConfigurationValue = $('#js-administration-editconfiguration-value');
                var $editConfigurationAddNewValueSelect = $('#js-administration-editconfiguration-addnewvalue-select');
                
                
                
                wsLib_toggleViews("createwith", 2, "radio", "no", 200);
                wsLib_toggleViews("rowadd", 2, "default");
                wsLib_toggleViews("addnewvalue", (numberOfValueTypes + 1), "default", "no");
                
                
                
                
                
                $editConfigurationAddNewValueSelect.on('click.toggleAddNewValue', '.dropdown-menu a', function(event) {
                    event.preventDefault();
                    
                    var addNewValueSelected = $editConfigurationAddNewValueSelect.data('active-value-type');
                    
                    $(this).closest('tr.row-add')
                           .children('td')
                           .eq(1)
                           .children('div')
                           .removeClass('js-form-active')
                           .filter('[data-corresponding-value-type="' + addNewValueSelected + '"]')
                           .addClass('js-form-active');
                });
                
                
                
                
                
                $editConfigurationValue.off('click.editToggle')
                                       .off('click.editSave')
                                       .off('click.deleteRow')
                                       .off('click.addRow')
                                       .on('click.editToggle', '.js-administration-editconfiguration-value-edittoggle', function(event) {
                    event.preventDefault();
                    
                    var $currentParameterItem = $(this).closest('.js-administration-editconfiguration-value-item');
                    
                    $currentParameterItem.children('td').find('.js-administration-editconfiguration-value-edittoggle').closest('div').toggle();
                    
                    $currentParameterItem.find('.js-administration-editconfiguration-value-display').toggle();
                    $currentParameterItem.find('.js-administration-editconfiguration-value-form').toggle();
                }).on('click.editSave', '.js-administration-editconfiguration-value-editsave', function(event) {
                    event.preventDefault();
                    
                    $(this).closest('tr').find('.js-administration-editconfiguration-value-form').find('input, select').each(function() {
                        var $currentInput = $(this);
                        var $currentDisplay = $currentInput.closest('.js-administration-editconfiguration-value-form')
                                                           .siblings('.js-administration-editconfiguration-value-display');
                        
                        if($currentInput.attr('type') === 'checkbox') {
                            $currentDisplay.text(wsPlugin_capitaliseFirstLetter($currentInput.prop('checked') + ""));
                        }
                        else if($currentInput.attr('type') === 'radio') {
                            $currentDisplay.text(wsPlugin_capitaliseFirstLetter(!$currentInput.prop('checked') + ""));
                        }
                        else if($currentInput.is('select.js-chosen-target-active')) {
                            var currentChosenValuesString = $currentInput.val().join();
                            
                            setTimeout(function() {
                                $currentDisplay.html(currentChosenValuesString);
                            }, 1);
                        }
                        else if($currentInput.is('select')) {
                            $currentDisplay.text($currentInput.val());
                        }
                        else {
                            $currentDisplay.text($currentInput.val());
                        }
                    });
                }).on('click.deleteRow', '.js-administration-editconfiguration-value-deleterow', function(event) {
                    event.preventDefault();
                    
                    $(this).closest('tr').remove();
                }).on('click.addRow', '.js-administration-editconfiguration-value-addrow', function(event) {
                    event.preventDefault();
                    
                    var selectedValueTypeLabel = $editConfigurationAddNewValueSelect.children('.dropdown')
                                                                                    .children('.dropdown-toggle')
                                                                                    .children('.js-administration-dropdowntree-select-display')
                                                                                    .data('selected-value-type');
                    
                    var currentRowHTML = '';
                    var currentRowData = [];
                    
                    $(this).closest('tr.row-add')
                           .children('td')
                           .children('div.js-form-active')
                           .find('input, select').each(function(index) {
                        var $currentInput = $(this);
                        
                        if($currentInput.attr('type') === 'checkbox') {
                            currentRowData.push({
                                index: index,
                                data: $currentInput.prop('checked'),
                                dataDisplay: wsPlugin_capitaliseFirstLetter($currentInput.prop('checked') + ""),
                                type: "checkbox",
                                HTML: $currentInput
                            });
                            
                            $currentInput.prop('checked', false);
                        }
                        else if($currentInput.attr('type') === 'radio') {
                            currentRowData.push({
                                index: index,
                                data: $currentInput.prop('checked'),
                                dataDisplay: wsPlugin_capitaliseFirstLetter($currentInput.prop('checked') + ""),
                                type: "radio",
                                HTML: $currentInput
                            });
                            
                            $currentInput.prop('checked', true);
                        }
                        else if($currentInput.is('select.js-chosen-target-active')) {
                            $currentInput.find(':selected').attr('selected', 'selected');
                            
                            currentRowData.push({
                                index: index,
                                data: $currentInput.val(),
                                dataDisplay: $currentInput.val(),
                                type: "select.js-chosen-target-active",
                                HTML: $currentInput.clone()
                            });
                            
                            $currentInput.find('option')
                                         .prop('selected', false)
                                         .removeAttr('selected');
                            
                            $currentInput.trigger('chosen:updated');
                        }
                        else if($currentInput.is('select')) {
                            $currentInput.find(':selected').attr('selected', 'selected');
                            
                            currentRowData.push({
                                index: index,
                                data: $currentInput.val(),
                                dataDisplay: $currentInput.val(),
                                type: "select",
                                HTML: $currentInput.clone()
                            });
                            
                            $currentInput.find(':selected').removeAttr('selected');
                        }
                        else {
                            currentRowData.push({
                                index: index,
                                data: $currentInput.val(),
                                dataDisplay: $currentInput.val(),
                                type: "text",
                                HTML: $currentInput
                            });
                            
                            $currentInput.val('');
                        }
                    });
                    
                    var currentPlugData = {
                        scope: selectedValueTypeLabel.type,
                        value: currentRowData[0].data,
                        valueDisplay: currentRowData[0].dataDisplay,
                        type: currentRowData[0].type,
                        HTML: currentRowData[0].HTML
                    };
                    
                    
                    
                    currentRowHTML += '<tr class="js-administration-editconfiguration-value-item">';
                        currentRowHTML += '<td>';
                            currentRowHTML += '<div class="js-administration-editconfiguration-value-display contain-long-word">' + currentPlugData.scope + '</div>';
                            currentRowHTML += '<div class="js-administration-editconfiguration-value-form contain-long-word js-initial-hide" style="display: none;">';
                            
                                currentRowHTML += currentPlugData.scope;
                            
                            currentRowHTML += '</div>';
                        currentRowHTML += '</td>';
                        currentRowHTML += '<td>';
                            currentRowHTML += '<div class="pull-right">';
                                currentRowHTML += '<div>';
                                    currentRowHTML += '<a class="js-administration-editconfiguration-value-edittoggle" href="#"><i class="icon-edit">&nbsp;&nbsp;</i></a>';
                                    currentRowHTML += '<a class="js-administration-editconfiguration-value-deleterow" href="#"><i class="icon-trash">&nbsp;&nbsp;</i></a>';
                                currentRowHTML += '</div>';
                                currentRowHTML += '<div class="update-actions js-initial-hide" style="display: none;">';
                                    currentRowHTML += '<button class="js-administration-editconfiguration-value-editsave js-administration-editconfiguration-value-edittoggle btn btn-primary"><span>Save</span></button>';
                                    currentRowHTML += '<button class="js-administration-editconfiguration-value-edittoggle btn"><span>Cancel</span></button>';
                                currentRowHTML += '</div>';
                            currentRowHTML += '</div>';
                            currentRowHTML += '<div class="js-administration-editconfiguration-value-display">' + currentPlugData.valueDisplay + '</div>';
                            currentRowHTML += '<div class="js-administration-editconfiguration-value-form js-initial-hide" style="display: none;">';
                            
                                if(currentPlugData.type === 'checkbox') {
                                currentRowHTML += '<ul class="checkbox-group">';
                                    currentRowHTML += '<li>';
                                        currentRowHTML += '<label>';
                                        currentRowHTML += '<input type="checkbox"' + (currentPlugData.value ? 'checked="checked"' : '') + '>';
                                        currentRowHTML += '</label>';
                                    currentRowHTML += '</li>';
                                currentRowHTML += '</ul>';
                                }
                                else if(currentPlugData.type === 'radio') {
                                var valueItemLength = $editConfigurationValue.find('.js-administration-editconfiguration-value-item').length;
                                
                                currentRowHTML += '<ul class="checkbox-group inline-list">';
                                    currentRowHTML += '<li>';
                                        currentRowHTML += '<label>';
                                        currentRowHTML += '<input type="radio" name="boolean_item_' + valueItemLength + '"' + (currentPlugData.value ? ' checked="checked"' : ' ') + '>';
                                        currentRowHTML += '<span>True</span>';
                                        currentRowHTML += '</label>';
                                    currentRowHTML += '</li>';
                                    currentRowHTML += '<li>';
                                        currentRowHTML += '<label>';
                                        currentRowHTML += '<input type="radio" name="boolean_item_' + valueItemLength + '"' + (currentPlugData.value ? ' ' : ' checked="checked"') + '>';
                                        currentRowHTML += '<span>False</span>';
                                        currentRowHTML += '</label>';
                                    currentRowHTML += '</li>';
                                currentRowHTML += '</ul>';
                                }
                                else if(currentPlugData.type === 'select.js-chosen-target-active') {
                                currentRowHTML += '<select class="js-chosen-target input-mid" multiple tabindex="3" data-placeholder="Select">';
                                    currentRowHTML += currentPlugData.HTML.html();
                                currentRowHTML += '</select>';
                                }
                                else if(currentPlugData.type === 'select') {
                                currentRowHTML += '<select class="input-mid">';
                                    currentRowHTML += currentPlugData.HTML.html();
                                currentRowHTML += '</select>';
                                }
                                else {
                                currentRowHTML += '<input type="text" class="input-mid" value="' + currentPlugData.value + '">';
                                }
                            
                            currentRowHTML += '</div>';
                        currentRowHTML += '</td>';
                    currentRowHTML += '</tr>';
                    
                    $editConfigurationValue.find('.row-add').first().before(currentRowHTML);
                    
                    
                    
                    $('.js-chosen-target').toggleClass('js-chosen-target js-chosen-target-active')
                                          .chosen({
                        width: "50%"
                    });
                });
                
            })();
        </script>
    </body>
</html>